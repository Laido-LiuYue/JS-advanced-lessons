<!DOCTYPE html>
<html>
<head>
	<title>任务二十一</title>
	<meta charset="utf-8">
	<script>
		//解构赋值的定义：ES6允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构赋值
		//数组解构赋值
		let [ , , xx] = ["foo", "bar", "baz"];
		console.log(xx);// "baz"

		let [x, , y] = [1, 2, 3];
		console.log(x,y);//1 3

		let [head, ...tail] = [1, 2, 3, 4];
		console.log(head,tail);//1 [2, 3, 4]

		let [d, e, ...f] = ['a'];
		console.log(d,e,f);//"a" undefined []
		//此外需要注意，如果解构不成功，变量的值就等于undefined

		//对象解构赋值
		var { foo1, bar1 } = { foo1: "aaa", bar1: "bbb" };
		console.log(foo1,bar1);	//aaa bbb

		/*对象的解构与数组有一个重要的不同。数组的元素是按次序排列的，变量的取值由它的位置决定.而对象的属性没有次序，变量必须与属性同名，才能取到正确的值*/

		var { bar2, foo2 } = { foo2: "ccc", bar2: "ddd" };
		console.log(foo2,bar2);//ccc ddd

		//左侧为键值对时,注意键值对赋值时的对应关系
		var { foo4: baz4 } = { foo4: 'aaa', bar4: 'bbb' };
		console.log(baz4);// "aaa"

		let { first: f, last: l } = obj1;
		console.log(f,l);//注意和下边写法的区别
		let { first, last } = obj1;
		console.log(first,last);	

		//对象的解构赋值是下面形式的简写
		var { foo5: foo5, bar5: bar5 } = { foo5: "aaa", bar5: "bbb" };	

		//对象的解构赋值的内部机制，是先找到同名属性，然后再赋给对应的变量。真正被赋值的是后者，而不是前者。
		var { foo6: baz6 } = { foo6: "aaa", bar6: "bbb" };
		console.log(baz6);// "aaa"
		//foo6 // error: foo is not defined
		//上面代码中，真正被赋值的是变量baz6，而不是模式foo6

		//字符串的解构赋值
		const [a, b, c, d, e] = 'hello';
		console.log(a); // "h"
		console.log(b); // "e"
		console.log(c); // "l"
		console.log(d); // "l"
		console.log(e); // "o"

		let {length : len} = 'hello';//有length属性
		console.log(len); // 5

		//数字解构赋值时，如果等号右边是数值和布尔值，则会先转为对象。
		let {toString: s1} = 123;
		console.log(s1); //
		//s1 === Number.prototype.toString // true

		//函数参数的解构赋值
		function move1({x = 0, y = 0} = {}) {
		    return [x, y];
		}
		console.log(move1({x: 3, y: 4})); // [3, 4]
		console.log(move1({x: 3})); // [3, 0]
		console.log(move1({})); // [0, 0]
		console.log(move1()); // [0, 0]

		function move2({x, y} = { x: 0, y: 0 }) {
		    return [x, y];
		}
		console.log(move2({x: 3, y: 8})); // [3, 8]
		console.log(move2({x: 3})); // [3, undefined]
		console.log(move2({})); // [undefined, undefined]
		console.log(move2()); // [0, 0]
		//上面代码是为函数move的参数指定默认值，而不是为变量x和y指定默认值，所以会得到与前一种写法不同的结果

		//undefined就会触发函数参数的默认值
		[1, undefined, 3].map(function(x = 'yes') {return x;});
		// [ 1, 'yes', 3 ]

		//解构赋值的常见应用
		// 1 交换变量的值
		var [x,y] = ["a","b"];
		[x, y] = [y, x];
		console.log(x,y);//b,a

		// 2 从函数返回多个值	（因为一般都只能返回一个值
		function example() {
		    return [1, 2, 3];
		}
		var [a, b, c] = example();
		console.log(a,b,c);//1,2,3

		// 3 提取JSON
		var jsonData = {
		    id: 42,
		    status: "OK",
		    data: [867, 5309]
		};
		let { id, status, data: number } = jsonData;
		console.log(id, status, number);
		// 42, "OK", [867, 5309]

		//4 给函数指定默认参数
		jQuery.ajax = function (url, {
		    async = true,
		    beforeSend = function () {},
		    cache = true,
		// ... more config
		}) {
		// ... do stuff
		};
	</script>
</head>
<body>

</body>
</html>